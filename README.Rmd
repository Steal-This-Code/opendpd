---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
library(opendpd)
```

# opendpd

<!-- badges: start -->
<!-- badges: end -->

The goal of opendpd is to provide an easy-to-use R interface for accessing various Dallas Police public safety datasets via the Socrata Open Data API, including functions for data retrieval and basic cleaning.

## Installation

You can install the development version of opendpd like so:

``` r
# install.packages("remotes") # Uncomment if user might not have remotes
remotes::install_github("Steal-This-Code/opendpd")
```

## Usage
```{recommended libraries}
# Optional: Load other packages needed for examples here if necessary
# library(dplyr)
# library(lubridate)

```

##Fetching Data

The package provides functions starting with `get_` to retrieve data from different datasets. They handle API pagination automatically and allow filtering via dedicated arguments or a custom `where` clause.

###Police Incidents

This is the primary dataset for reported crime incidents.

```{r example}
# Get the first 50 incidents in the Central division for March 2024
incidents_mar_central <- get_incidents(
  start_date = "2024-03-01",
  end_date = "2024-03-31",
  division = "CENTRAL",
  limit = 50
)
print(head(incidents_mar_central))

# Get incidents as an sf object (requires sf package)
# Note: Uses State Plane coordinates (EPSG:2276)
# incidents_sf <- get_incidents(limit = 10, convert_geo = TRUE)
# print(class(incidents_sf))

```

##Police Arrests

Retrieve data on arrests made by Dallas Police.

```{r example 2}
# Get arrests for specific beats in March 2024
arrests_mar_beats <- get_arrests(
  start_date = "2024-03-01",
  end_date = "2024-03-31",
  beat = c(114, 121), # Note: Uses 'arlbeat' field from API
  limit = 25
)
print(head(arrests_mar_beats))

```

